(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6677:function(e,t,s){"use strict";var r=s(7614);let authApi=class authApi extends r.Z{constructor(){super()}async SignUp(e,t,s,r){let a=await this.request(()=>this.http.post("/api/v1/users/signup",{name:e,email:t,password:s,passwordConfirm:r,role:"user"}),{notify_success:!0,notify_error:!0});if(String(a.status)?.startsWith("2"))return!0}async Login(e,t){let s=await this.request(()=>this.http.post("/api/v1/users/login",{email:e,password:t}),{notify_error:!0});if(s?.data.token)return s.data.token}async getMe(e){let t=await this.request(()=>this.http.get("/api/v1/users/me"));if(t?.data.data.data)return t.data.data.data}async logOut(e){let t=await this.request(()=>this.http.get("/api/v1/users/logout"));if(t?.data.status)return t.data.status}async updateUserInfo(e,t,s){let r=await this.request(()=>this.http.patch("/api/v1/users/update-info",{name:e,email:t,password:s}),{notify_success:!0,notify_error:!0});if(r?.status)return r.status}async updateUserPassword(e,t,s){let r=await this.request(()=>this.http.patch("/api/v1/users/update-password",{password:e,passwordNew:t,passwordConfirmNew:s}),{notify_success:!0,notify_error:!0});if(r?.status)return r.status}async ForgotPassword(e){let t=await this.request(()=>this.http.post("/api/v1/users/forgot-password",{email:e}),{notify_success:!1,notify_error:!1});if(t)return t}async ResetPassword(e,t,s){let r=await this.request(()=>this.http.patch(`/api/v1/users/reset-password/${e}`,{password:t,passwordConfirm:s}),{notify_success:!1,notify_error:!1});if(r)return r}async verifyEmail(e){let t=await this.request(()=>this.http.get(`/api/v1/users/verifyEmail/${e}`));if(t)return t}};t.Z=new authApi},1902:function(e,t,s){Promise.resolve().then(s.t.bind(s,2853,23)),Promise.resolve().then(s.bind(s,6940)),Promise.resolve().then(s.bind(s,6348)),Promise.resolve().then(s.t.bind(s,982,23)),Promise.resolve().then(s.t.bind(s,413,23)),Promise.resolve().then(s.t.bind(s,8326,23)),Promise.resolve().then(s.t.bind(s,1371,23)),Promise.resolve().then(s.bind(s,7415)),Promise.resolve().then(s.t.bind(s,3343,23))},7614:function(e,t,s){"use strict";var r=s(7415);s(4482);let a=s(5994);t.Z=class{async request(e,t){var s,a,o,i,l,n,c;try{let i=await e();return(null==t?void 0:t.notify_success)&&(null===(s=String(i.status))||void 0===s?void 0:s.startsWith("2"))&&r.toast.success("".concat((null==i?void 0:null===(a=i.data)||void 0===a?void 0:a.message)||(null==i?void 0:null===(o=i.data)||void 0===o?void 0:o.status))),i}catch(e){return(null==t?void 0:t.notify_error)&&((null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.message)?r.toast.error("".concat(null==e?void 0:null===(c=e.response)||void 0===c?void 0:null===(n=c.data)||void 0===n?void 0:n.message)):e.message&&r.toast.error("".concat(e.message))),e.response}}constructor(){this.jwtHeader,this.jwtHeader=window.localStorage.getItem("jwt"),this.http=a.create({baseURL:"".concat("https://natours-back-end-f19a9ffbcdd5.herokuapp.com/"),timeout:3e4,headers:{"X-Custom-Header":"foobar",jwt:this.jwtHeader},withCredentials:!0})}}},6940:function(e,t,s){"use strict";s.r(t);var r=s(7437);s(2265);var a=s(6691),o=s.n(a),i=s(1396),l=s.n(i),n=s(6677),c=s(1167);s(5632);var u=s(4033),d=s(593),h=s(5397),p=s(1272),f=s(8793);t.default=function(){var e,t,s;let a=(0,u.useRouter)(),{user:i,loggedOut:y,isLoading:m,mutate:g}=(0,c.Z)(),b=null==i?void 0:i.name,v=(null==i?void 0:null===(e=i.photo)||void 0===e?void 0:e.path.startsWith("http"))?null==i?void 0:null===(t=i.photo)||void 0===t?void 0:t.path:(null==i?void 0:null===(s=i.photo)||void 0===s?void 0:s.path)?"".concat("https://natours-back-end-f19a9ffbcdd5.herokuapp.com/","/").concat(null==i?void 0:i.photo.path.replace(/^public\\/,"")):null,logout=async()=>{var e;let t=await n.Z.logOut(null===(e=window.localStorage)||void 0===e?void 0:e.jwt);"success"===t&&(await g(),a.push("/"),window.location.reload())};return i?(0,r.jsxs)(d.F,{placement:"bottom-end absolute",children:[(0,r.jsx)(h.S,{children:(0,r.jsxs)("div",{className:"flex h-full items-center cursor-pointer px-[1rem] hover:bg-grey-tundora-lighter",children:[(0,r.jsx)("div",{className:"text-white-alabaster font-normal uppercase mr-[3rem] ",children:b}),(0,r.jsx)("span",{children:(0,r.jsx)(o(),{className:"clip-path-circle select-none drag-none w-full h-full max-w-[50px] max-h-[50px]",width:50,height:50,alt:"Profile pic",src:v||"/img/no-user-image.jpg"})})]})}),(0,r.jsx)(p.a,{"aria-label":"Dynamic Actions",items:[{key:"account-settings",label:"Settings"},{key:"my-bookings",label:"My Bookings"},{key:"my-reviews",label:"My Reviews"},{key:"billing",label:"Billing"},{key:"logout",label:"Logout"}],className:"  box-shadow-bold bg-grey-tundora rounded-[8px] mt-[-1rem]",children:e=>(0,r.jsx)(f.W,{className:"dropdown-item  text-[2rem] text-white-alabaster w-[100%] py-[1rem] px-[3rem] [&:not(:first-child)]:mt-[0.5rem] hover:bg-grey-tundora-lighter rounded-[8px]",onClick:"logout"===e.key?()=>logout():()=>a.push("/".concat(e.key)),children:e.label},e.key)})]}):(0,r.jsxs)("nav",{className:"flex h-full items-center",children:[(0,r.jsx)(l(),{href:"/login",className:"text-white-alabaster cursor-pointer font-normal uppercase mr-[3rem] hover:translate-y-[-2px] hover-text-shadow-black transition duration-300",children:"Log in"}),(0,r.jsx)(l(),{href:"/signup",className:"text-white-alabaster cursor-pointer font-normal    uppercase py-[1rem] px-[3rem] border-solid    border border-current rounded-[10rem] hover:bg-white-alabaster hover:text-grey-boulder hover:border-grey-boulder hover:translate-y-[-2px] transition duration-300",children:"Sign up"})]})}},6348:function(e,t,s){"use strict";s.r(t);var r=s(7437),a=s(2265),o=s(1754);s(3803),t.default=e=>{let{className:t}=e,[s,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage?localStorage.getItem("natours-theme"):null;e?i(e):i("light")},[]),(0,a.useEffect)(()=>{let e=document.documentElement;"light"===s?(e.style.setProperty("--white-basic","#ffffff"),e.style.setProperty("--white-alabaster-background","#f7f7f7"),e.style.setProperty("--white-alabaster-text","#f7f7f7"),e.style.setProperty("--grey-tundora","#444"),e.style.setProperty("--grey-boulder-text","#777777"),e.style.setProperty("--grey-dusty-text","#999999"),e.style.setProperty("--grey-concrete-background","#f2f2f2"),e.style.setProperty("--input-text","inherit"),e.style.setProperty("--black-basic","#000000"),e.style.setProperty("--green-emerald-gradient-theme","linear-gradient(to right bottom, rgba(125, 213, 111, 1), rgba(40, 180, 135, 1))"),e.style.setProperty("--box-shadow-standard","0 1.5rem 4rem rgba(0, 0, 0, 0.1)"),e.style.setProperty("--box-shadow-bold","0 2.5rem 8rem 2rem rgba(0, 0, 0, 0.1)"),e.style.setProperty("--box-shadow-bold-x2","0 2.5rem 6rem 4rem rgba(0, 0, 0, 0.12)")):(e.style.setProperty("--white-basic","#0f0f0f"),e.style.setProperty("--white-alabaster-background","#0f0f0f"),e.style.setProperty("--white-alabaster-text","#ffffff"),e.style.setProperty("--grey-tundora","#444"),e.style.setProperty("--grey-boulder-text","#ffffff"),e.style.setProperty("--grey-dusty-text","#ffffff"),e.style.setProperty("--grey-concrete-background","#272727"),e.style.setProperty("--input-text","#e8e6e3e0"),e.style.setProperty("--black-basic","#f7f7f7"),e.style.setProperty("--green-emerald-gradient-theme","#0f0f0f"),e.style.setProperty("--box-shadow-standard","0 1.5rem 4rem rgba(255, 255, 255, 0.1)"),e.style.setProperty("--box-shadow-bold","0 2.5rem 8rem 2rem rgba(255, 255, 255, 0.1)"),e.style.setProperty("--box-shadow-bold-x2","0 2.5rem 6rem 4rem rgba(255, 255, 255, 0.12)")),e.style.setProperty("--clip-box-shadow-bold-x2","drop-shadow(0rem 2.5rem 6rem rgba(0, 0, 0, 0.25))")},[s]),(0,r.jsx)(o.Nr,{className:t,duration:500,toggled:"dark"===s,toggle:()=>{let e="light"===s?"dark":"light";i(e),localStorage.setItem("natours-theme",e)},reversed:!0})}},5632:function(e,t,s){"use strict";var r=s(7437);s(2265),s(6691),s(6096);let BikeSVG=e=>{let{className:t}=e;return(0,r.jsx)("svg",{className:"bike ".concat(t),viewBox:"0 0 48 30",width:"48px",height:"30px",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",children:[(0,r.jsxs)("g",{transform:"translate(9.5,19)",children:[(0,r.jsx)("circle",{className:"bike__tire",r:"9",strokeDasharray:"56.549 56.549"}),(0,r.jsxs)("g",{className:"bike__spokes-spin",strokeDasharray:"31.416 31.416",strokeDashoffset:"-23.562",children:[(0,r.jsx)("circle",{className:"bike__spokes",r:"5"}),(0,r.jsx)("circle",{className:"bike__spokes",r:"5",transform:"rotate(180,0,0)"})]})]}),(0,r.jsx)("g",{transform:"translate(24,19)",children:(0,r.jsxs)("g",{className:"bike__pedals-spin",strokeDasharray:"25.133 25.133",strokeDashoffset:"-21.991",transform:"rotate(67.5,0,0)",children:[(0,r.jsx)("circle",{className:"bike__pedals",r:"4"}),(0,r.jsx)("circle",{className:"bike__pedals",r:"4",transform:"rotate(180,0,0)"})]})}),(0,r.jsxs)("g",{transform:"translate(38.5,19)",children:[(0,r.jsx)("circle",{className:"bike__tire",r:"9",strokeDasharray:"56.549 56.549"}),(0,r.jsxs)("g",{className:"bike__spokes-spin",strokeDasharray:"31.416 31.416",strokeDashoffset:"-23.562",children:[(0,r.jsx)("circle",{className:"bike__spokes",r:"5"}),(0,r.jsx)("circle",{className:"bike__spokes",r:"5",transform:"rotate(180,0,0)"})]})]}),(0,r.jsx)("polyline",{className:"bike__seat",points:"14 3,18 3",strokeDasharray:"5 5"}),(0,r.jsx)("polyline",{className:"bike__body",points:"16 3,24 19,9.5 19,18 8,34 7,24 19",strokeDasharray:"79 79"}),(0,r.jsx)("path",{className:"bike__handlebars",d:"m30,2h6s1,0,1,1-1,1-1,1",strokeDasharray:"10 10"}),(0,r.jsx)("polyline",{className:"bike__front",points:"32.5 2,38.5 19",strokeDasharray:"19 19"})]})})};t.Z=function(e){let{className:t}=e;return(0,r.jsx)("div",{className:"text-green-emerald ",children:(0,r.jsx)(BikeSVG,{className:t})})}},1167:function(e,t,s){"use strict";s.d(t,{Z:function(){return useUser}});var r=s(2333),a=s(6677);function useUser(){let{data:e,mutate:t,isLoading:s,error:o}=(0,r.ZP)("getMe",async()=>await a.Z.getMe());return{loggedOut:!e&&!s,user:e,mutate:t,isLoading:s}}},2853:function(){},982:function(){},6096:function(){}},function(e){e.O(0,[248,413,333,326,613,971,472,744],function(){return e(e.s=1902)}),_N_E=e.O()}]);