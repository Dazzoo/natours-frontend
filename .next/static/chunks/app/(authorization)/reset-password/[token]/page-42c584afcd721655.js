(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{6677:function(e,t,s){"use strict";var r=s(7614);let authApi=class authApi extends r.Z{constructor(){super()}async SignUp(e,t,s,r){let a=await this.request(()=>this.http.post("/api/v1/users/signup",{name:e,email:t,password:s,passwordConfirm:r,role:"user"}),{notify_success:!0,notify_error:!0});if(String(a.status)?.startsWith("2"))return!0}async Login(e,t){let s=await this.request(()=>this.http.post("/api/v1/users/login",{email:e,password:t}),{notify_error:!0});if(s?.data.token)return s.data.token}async getMe(e){let t=await this.request(()=>this.http.get("/api/v1/users/me"));if(t?.data.data.data)return t.data.data.data}async logOut(e){let t=await this.request(()=>this.http.get("/api/v1/users/logout"));if(t?.data.status)return t.data.status}async updateUserInfo(e,t,s){let r=await this.request(()=>this.http.patch("/api/v1/users/update-info",{name:e,email:t,password:s}),{notify_success:!0,notify_error:!0});if(r?.status)return r.status}async updateUserPassword(e,t,s){let r=await this.request(()=>this.http.patch("/api/v1/users/update-password",{password:e,passwordNew:t,passwordConfirmNew:s}),{notify_success:!0,notify_error:!0});if(r?.status)return r.status}async ForgotPassword(e){let t=await this.request(()=>this.http.post("/api/v1/users/forgot-password",{email:e}),{notify_success:!1,notify_error:!1});if(t)return t}async ResetPassword(e,t,s){let r=await this.request(()=>this.http.patch(`/api/v1/users/reset-password/${e}`,{password:t,passwordConfirm:s}),{notify_success:!1,notify_error:!1});if(r)return r}async verifyEmail(e){let t=await this.request(()=>this.http.get(`/api/v1/users/verifyEmail/${e}`));if(t)return t}};t.Z=new authApi},440:function(e,t,s){Promise.resolve().then(s.bind(s,9905))},7614:function(e,t,s){"use strict";var r=s(7415);s(4482);let a=s(5994);t.Z=class{async request(e,t){var s,a,n,i,o,l,c;try{let i=await e();return(null==t?void 0:t.notify_success)&&(null===(s=String(i.status))||void 0===s?void 0:s.startsWith("2"))&&r.toast.success("".concat((null==i?void 0:null===(a=i.data)||void 0===a?void 0:a.message)||(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.status))),i}catch(e){return(null==t?void 0:t.notify_error)&&((null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)?r.toast.error("".concat(null==e?void 0:null===(c=e.response)||void 0===c?void 0:null===(l=c.data)||void 0===l?void 0:l.message)):e.message&&r.toast.error("".concat(e.message))),e.response}}constructor(){this.jwtHeader,this.jwtHeader=window.localStorage.getItem("jwt"),this.http=a.create({baseURL:"".concat("https://natours-back-end-f19a9ffbcdd5.herokuapp.com/"),timeout:3e4,headers:{"X-Custom-Header":"foobar",jwt:this.jwtHeader},withCredentials:!0})}}},9905:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _token_page}});var r=s(7437);s(2265);var a=s(6677);s(5632);var n=s(4033),i=s(1865),o=s(7078),l=s(5691),LogRegLayout=function(e){let{children:t}=e;return(0,r.jsx)("main",{className:"bg-white-alabaster py-[8rem] px-[6rem]  flex justify-center font-lato ",children:(0,r.jsx)("div",{className:"bg-white-basic max-w-[55rem] min-w-[10rem] w-[55rem] bg-white min-h-[20rem] py-[5rem] px-[7rem]    max-md:py-[2rem] max-md:px-[3.5rem] box-shadow-bold rounded-[5px] ",children:t})})},c=s(973),_token_page=function(e){let{params:t}=e,s=t.token,{push:u}=(0,n.useRouter)(),{register:d,handleSubmit:p,formState:{errors:m},watch:h}=(0,i.cI)(),onSubmit=async e=>{let t=await a.Z.ResetPassword(s,e.Password,e["Confirm password"]);String(null==t?void 0:t.status).startsWith("2")?u("/info/success/reset-password/".concat(t.data.message),"replace"):(null==t?void 0:t.data.error.message)?u("/info/error/error/".concat(t.data.error.message),"replace"):(null==t?void 0:t.data.message)?u("/info/error/error/".concat(t.data.message),"replace"):u("/info/error/error/Something went wrong","replace")};return(0,r.jsxs)(LogRegLayout,{children:[(0,r.jsx)(c.Z,{className:"mb-[3.5rem]",value:"Create your new password"}),(0,r.jsxs)("form",{onSubmit:p(onSubmit),children:[(0,r.jsx)("div",{className:"flex flex-col mb-[2.5rem] relative",children:(0,r.jsx)(l.Z,{type:"password",required:!0,errors:m,register:d,pattern_value:/.{8,}/,pattern_message:"At least 8 characters is required",label:!0,name:"Password"})}),(0,r.jsx)("div",{className:"flex flex-col mb-[2.5rem] relative",children:(0,r.jsx)(l.Z,{type:"password",required:!0,errors:m,register:d,pattern_value:/.{8,}/,pattern_message:"At least 8 characters is required",label:!0,validate:e=>{let t=h("Password");return t===e||"Passwords do not match"},name:"Confirm password"})}),(0,r.jsx)("div",{className:"mt-[3rem]",children:(0,r.jsx)(o.Z,{value:"Register"})})]})]})}},7078:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=function(e){let{value:t,onClick:s,className:a}=e;return(0,r.jsx)("input",{className:"py-[1.25rem] text-[1.4rem] px-[3rem] bg-green-emerald rounded-[10rem] text-white flex self-center \n  uppercase hover:translate-y-[-2px] hover-button-shadow cursor-pointer transition duration-300 ".concat(a),type:"submit",value:t,onClick:s})}},5691:function(e,t,s){"use strict";var r=s(7437),a=s(2265),n=s(3800);t.Z=function(e){var t;let{name:s,type:i,required:o,id:l,pattern_value:c,pattern_message:u,register:d,errors:p,validate:m,label:h}=e,[f,g]=(0,a.useState)(null);return(0,r.jsxs)("div",{className:"relative",children:[h?(0,r.jsx)("label",{className:" text-[1.6rem] font-bold mb-[0.75rem]",children:s}):null,(0,r.jsx)("input",{className:"bg-grey-concrete text-input-basic font-lato input-auth w-[100%] ".concat((null===(t=p[s])||void 0===t?void 0:t.type)||!c.test(f)?"input-auth-error-focus":"input-auth-valid-focus"),type:i,id:l,required:o,placeholder:s,...d("".concat(s),{pattern:{value:c,message:u},validate:m,onChange:e=>{let t=e.target.value;g(t)}})}),(0,r.jsx)("div",{className:"absolute top-[100%] text-orange-burning font-semibold text-[1.4rem]",children:(0,r.jsx)(n.B,{errors:p,name:s,render:e=>{let{message:t}=e;return(0,r.jsx)("p",{children:t})}})})]})}},5632:function(e,t,s){"use strict";var r=s(7437);s(2265),s(6691),s(6096);let BikeSVG=e=>{let{className:t}=e;return(0,r.jsx)("svg",{className:"bike ".concat(t),viewBox:"0 0 48 30",width:"48px",height:"30px",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",children:[(0,r.jsxs)("g",{transform:"translate(9.5,19)",children:[(0,r.jsx)("circle",{className:"bike__tire",r:"9",strokeDasharray:"56.549 56.549"}),(0,r.jsxs)("g",{className:"bike__spokes-spin",strokeDasharray:"31.416 31.416",strokeDashoffset:"-23.562",children:[(0,r.jsx)("circle",{className:"bike__spokes",r:"5"}),(0,r.jsx)("circle",{className:"bike__spokes",r:"5",transform:"rotate(180,0,0)"})]})]}),(0,r.jsx)("g",{transform:"translate(24,19)",children:(0,r.jsxs)("g",{className:"bike__pedals-spin",strokeDasharray:"25.133 25.133",strokeDashoffset:"-21.991",transform:"rotate(67.5,0,0)",children:[(0,r.jsx)("circle",{className:"bike__pedals",r:"4"}),(0,r.jsx)("circle",{className:"bike__pedals",r:"4",transform:"rotate(180,0,0)"})]})}),(0,r.jsxs)("g",{transform:"translate(38.5,19)",children:[(0,r.jsx)("circle",{className:"bike__tire",r:"9",strokeDasharray:"56.549 56.549"}),(0,r.jsxs)("g",{className:"bike__spokes-spin",strokeDasharray:"31.416 31.416",strokeDashoffset:"-23.562",children:[(0,r.jsx)("circle",{className:"bike__spokes",r:"5"}),(0,r.jsx)("circle",{className:"bike__spokes",r:"5",transform:"rotate(180,0,0)"})]})]}),(0,r.jsx)("polyline",{className:"bike__seat",points:"14 3,18 3",strokeDasharray:"5 5"}),(0,r.jsx)("polyline",{className:"bike__body",points:"16 3,24 19,9.5 19,18 8,34 7,24 19",strokeDasharray:"79 79"}),(0,r.jsx)("path",{className:"bike__handlebars",d:"m30,2h6s1,0,1,1-1,1-1,1",strokeDasharray:"10 10"}),(0,r.jsx)("polyline",{className:"bike__front",points:"32.5 2,38.5 19",strokeDasharray:"19 19"})]})})};t.Z=function(e){let{className:t}=e;return(0,r.jsx)("div",{className:"text-green-emerald ",children:(0,r.jsx)(BikeSVG,{className:t})})}},973:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=function(e){let{value:t,className:s}=e;return(0,r.jsx)("h2",{className:"uppercase font-bold	text-[2.25rem] bg-green-emerald-gradient bg-clip-text text-transparent ".concat(s),children:t})}},679:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{unstable_getImgProps:function(){return unstable_getImgProps},default:function(){return l}});let r=s(1024),a=s(7929),n=s(2637),i=s(413),o=r._(s(9950)),unstable_getImgProps=e=>{(0,n.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,a.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}},l=i.Image},6096:function(){},6691:function(e,t,s){e.exports=s(679)}},function(e){e.O(0,[248,413,918,971,472,744],function(){return e(e.s=440)}),_N_E=e.O()}]);